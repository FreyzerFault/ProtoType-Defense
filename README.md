# Prototype Defence Game Design

## Entities:
- Tower
- Projectile
- Enemy

#### Game Controller:
Controla el flujo del juego a lo largo de un FRAME

**OnUpdate( deltaTime )** contiene la lógica del juego, movimientos, colisiones y comportamientos de cada Entidad:
- Tower rota para apuntar al enemigo según su preferencia y dispara con una frecuencia
- Projectile se mueve según las propiedades que la torre le concedió tras su creación, y comprueba colisiones con enemigos.
- Enemy se mueve a lo largo del camino y recibe daño de los proyectiles.
- Path guarda información sobre los enemigos y calcula a qué enemigo deben apuntar las torres según su preferencia.


[![](https://mermaid.ink/img/eyJjb2RlIjoic2VxdWVuY2VEaWFncmFtXHJcblxyXG4gICAgcGFydGljaXBhbnQgR2FtZSBhcyBHYW1lIENvbnRyb2xsZXJcclxuXHJcbiAgICBwYXIgb25VcGRhdGUgcG9yIEZyYW1lXHJcblxyXG4gICAgICAgIGxvb3AgQ2FkYSBmcmFtZVxyXG5cclxuICAgICAgICAgICAgbG9vcCBDYWRhIHByb2plY3RpbGVcclxuXHJcbiAgICAgICAgICAgICAgICBhbHQgQ29saXNpb24gY29uIEVuZW1pZ29cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgR2FtZS0-PitQcm9qZWN0aWxlOiBEZWxldGVcclxuICAgICAgICAgICAgICAgICAgICBHYW1lLT4-K0VuZW15OiBnZXRIaXQoVG93ZXIgRG1nKVxyXG4gICAgICAgICAgICAgICAgICAgIEVuZW15LS0-Pi1HYW1lOiBMaWZlXHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGFsdCBMaWZlIDw9IDBcclxuICAgICAgICAgICAgICAgICAgICAgICAgR2FtZS0-PitFbmVteTogRGVsZXRlXHJcbiAgICAgICAgICAgICAgICAgICAgZW5kXHJcblxyXG4gICAgICAgICAgICAgICAgZWxzZSBObyBDb2xpc2lvbmFcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgYWx0IEhvbW1pbmdcclxuICAgICAgICAgICAgICAgICAgICBUb3dlci0-PitQcm9qZWN0aWxlOiBHZXQgQWltZWQgRW5lbXlcclxuICAgICAgICAgICAgICAgICAgICAgICAgUHJvamVjdGlsZS0tPj4tUHJvamVjdGlsZTogTG9va0F0KEVuZW15KVxyXG4gICAgICAgICAgICAgICAgICAgIGVuZFxyXG5cclxuICAgICAgICAgICAgICAgICAgICBHYW1lLT4-K1Byb2plY3RpbGU6IE1vdmVcclxuXHJcbiAgICAgICAgICAgICAgICBlbmRcclxuXHJcbiAgICAgICAgICAgIGVuZFxyXG5cclxuICAgICAgICAgICAgbG9vcCBDYWRhIFRvd2VyXHJcbiAgICAgICAgICAgICAgICBHYW1lLT4-K1Rvd2VyOiBBcHVudGFyIEVuZW1pZ29cclxuICAgICAgICAgICAgICAgIFRvd2VyLT4-K1BhdGg6IEdldCBGaXJzdC9MYXN0L1dlYWsvU3Ryb25nIEVuZW15XHJcbiAgICAgICAgICAgICAgICBQYXRoLS0-Pi1Ub3dlcjogQWltZWQgRW5lbXlcclxuICAgICAgICAgICAgICAgIFRvd2VyLS0-Pi1Ub3dlcjogTG9va0F0KEVuZW15IFBvc2l0aW9uKVxyXG4gICAgICAgICAgICBlbmRcclxuXHJcbiAgICAgICAgICAgIGxvb3AgQ2FkYSBFbmVteVxyXG4gICAgICAgICAgICAgICAgR2FtZS0-PitFbmVteTogTW92ZVxyXG4gICAgICAgICAgICBlbmRcclxuXHJcbiAgICAgICAgZW5kXHJcblxyXG4gICAgYW5kIG9uVXBkYXRlIHBvciBTaG9vdFRpbWVyXHJcbiAgICAgICAgbG9vcCBDYWRhIFRvd2VyXHJcbiAgICAgICAgICAgIGFsdCBTaG9vdFRpbWVyID49IDEgLyBUb3dlciBTcGVlZFxyXG4gICAgICAgICAgICAgICAgR2FtZS0-PitUb3dlcjogU2hvb3RcclxuICAgICAgICAgICAgZW5kXHJcbiAgICAgICAgZW5kXHJcbiAgICBlbmQiLCJtZXJtYWlkIjp7InRoZW1lIjoiZm9yZXN0In0sInVwZGF0ZUVkaXRvciI6ZmFsc2V9)](https://mermaid-js.github.io/mermaid-live-editor/#/edit/eyJjb2RlIjoic2VxdWVuY2VEaWFncmFtXHJcblxyXG4gICAgcGFydGljaXBhbnQgR2FtZSBhcyBHYW1lIENvbnRyb2xsZXJcclxuXHJcbiAgICBwYXIgb25VcGRhdGUgcG9yIEZyYW1lXHJcblxyXG4gICAgICAgIGxvb3AgQ2FkYSBmcmFtZVxyXG5cclxuICAgICAgICAgICAgbG9vcCBDYWRhIHByb2plY3RpbGVcclxuXHJcbiAgICAgICAgICAgICAgICBhbHQgQ29saXNpb24gY29uIEVuZW1pZ29cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgR2FtZS0-PitQcm9qZWN0aWxlOiBEZWxldGVcclxuICAgICAgICAgICAgICAgICAgICBHYW1lLT4-K0VuZW15OiBnZXRIaXQoVG93ZXIgRG1nKVxyXG4gICAgICAgICAgICAgICAgICAgIEVuZW15LS0-Pi1HYW1lOiBMaWZlXHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGFsdCBMaWZlIDw9IDBcclxuICAgICAgICAgICAgICAgICAgICAgICAgR2FtZS0-PitFbmVteTogRGVsZXRlXHJcbiAgICAgICAgICAgICAgICAgICAgZW5kXHJcblxyXG4gICAgICAgICAgICAgICAgZWxzZSBObyBDb2xpc2lvbmFcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgYWx0IEhvbW1pbmdcclxuICAgICAgICAgICAgICAgICAgICBUb3dlci0-PitQcm9qZWN0aWxlOiBHZXQgQWltZWQgRW5lbXlcclxuICAgICAgICAgICAgICAgICAgICAgICAgUHJvamVjdGlsZS0tPj4tUHJvamVjdGlsZTogTG9va0F0KEVuZW15KVxyXG4gICAgICAgICAgICAgICAgICAgIGVuZFxyXG5cclxuICAgICAgICAgICAgICAgICAgICBHYW1lLT4-K1Byb2plY3RpbGU6IE1vdmVcclxuXHJcbiAgICAgICAgICAgICAgICBlbmRcclxuXHJcbiAgICAgICAgICAgIGVuZFxyXG5cclxuICAgICAgICAgICAgbG9vcCBDYWRhIFRvd2VyXHJcbiAgICAgICAgICAgICAgICBHYW1lLT4-K1Rvd2VyOiBBcHVudGFyIEVuZW1pZ29cclxuICAgICAgICAgICAgICAgIFRvd2VyLT4-K1BhdGg6IEdldCBGaXJzdC9MYXN0L1dlYWsvU3Ryb25nIEVuZW15XHJcbiAgICAgICAgICAgICAgICBQYXRoLS0-Pi1Ub3dlcjogQWltZWQgRW5lbXlcclxuICAgICAgICAgICAgICAgIFRvd2VyLS0-Pi1Ub3dlcjogTG9va0F0KEVuZW15IFBvc2l0aW9uKVxyXG4gICAgICAgICAgICBlbmRcclxuXHJcbiAgICAgICAgICAgIGxvb3AgQ2FkYSBFbmVteVxyXG4gICAgICAgICAgICAgICAgR2FtZS0-PitFbmVteTogTW92ZVxyXG4gICAgICAgICAgICBlbmRcclxuXHJcbiAgICAgICAgZW5kXHJcblxyXG4gICAgYW5kIG9uVXBkYXRlIHBvciBTaG9vdFRpbWVyXHJcbiAgICAgICAgbG9vcCBDYWRhIFRvd2VyXHJcbiAgICAgICAgICAgIGFsdCBTaG9vdFRpbWVyID49IDEgLyBUb3dlciBTcGVlZFxyXG4gICAgICAgICAgICAgICAgR2FtZS0-PitUb3dlcjogU2hvb3RcclxuICAgICAgICAgICAgZW5kXHJcbiAgICAgICAgZW5kXHJcbiAgICBlbmQiLCJtZXJtYWlkIjp7InRoZW1lIjoiZm9yZXN0In0sInVwZGF0ZUVkaXRvciI6ZmFsc2V9)



**OnRender()** utiliza el framework de OpenGL para renderizar todas las entidades con su Sprite, y demás objetos:
- Sprite está formado por un Quad de 2 Triángulos con una textura encima
- Hitbox tiene las propiedades necesarias para detectar colisiones, pero también puede renderizarse su contorno
- Texture Manager es el encargado de importar todas las texturas y enlazarlas con uno de los 31 slots que openGL proporciona
- Shader Manager gestiona los Shaders importándolos y compilándolos al igual que las texturas, además de declarar uniforms y enlazarlos con el contexto de OpenGL.



[![](https://mermaid.ink/img/eyJjb2RlIjoic2VxdWVuY2VEaWFncmFtXHJcblxyXG5wYXJ0aWNpcGFudCBHYW1lIGFzIEdhbWUgQ29udHJvbGxlclxyXG5wYXJ0aWNpcGFudCBTcHJpdGUgYXMgRW50aXR5IFNwcml0ZVxyXG5wYXJ0aWNpcGFudCBIaXRib3ggYXMgRW50aXR5IEhpdGJveFxyXG5wYXJ0aWNpcGFudCBUZXh0dXJlIGFzIFRleHR1cmUgTWFuYWdlclxyXG5wYXJ0aWNpcGFudCBTaGFkZXIgYXMgU2hhZGVyIE1hbmFnZXJcclxuXHJcbk5vdGUgbGVmdCBvZiBHYW1lIDogb25SZW5kZXIoKVxyXG5cclxuR2FtZS0-PitTaGFkZXIgOiBCaW5kIE1haW4gU2hhZGVyXHJcblxyXG5sb29wIENhZGEgVGV4dHVyYVxyXG4gICAgR2FtZS0-PitUZXh0dXJlIDogQmluZChzbG90KVxyXG5lbmRcclxuXHJcbk5vdGUgbGVmdCBvZiBHYW1lIDogU3ByaXRlIERyYXdpbmdcclxuXHJcbmxvb3AgQ2FkYSBFbnRpdHlcclxuXHJcbiAgICBHYW1lLT4-K1Nwcml0ZSA6IERyYXdcclxuICAgIFNwcml0ZS0-PitTaGFkZXIgOiBTRVQgTVZQIFVuaWZvcm0gPSBTcHJpdGUgTVZQICogZGVmYXVsdCBNVlBcclxuICAgIFNwcml0ZS0-Pi1TcHJpdGUgOiBnbERyYXcoKVxyXG5cclxuZW5kXHJcblxyXG5Ob3RlIGxlZnQgb2YgR2FtZSA6IEhpdGJveCBHcmlkIERyYXdpbmdcclxuXHJcbmxvb3AgQ2FkYSBFbnRpdHkgY29uIEhpdGJveFxyXG5cclxuICAgIEdhbWUtPj4rSGl0Ym94IDogRHJhdyBHcmlkXHJcbiAgICBIaXRib3gtPj4rU2hhZGVyIDogU0VUIE1WUCBVbmlmb3JtID0gSGl0Ym94IE1WUCAqIGRlZmF1bHQgTVZQXHJcbiAgICBIaXRib3gtPj4tSGl0Ym94IDogZ2xEcmF3KClcclxuXHJcbmVuZCIsIm1lcm1haWQiOnsidGhlbWUiOiJmb3Jlc3QifSwidXBkYXRlRWRpdG9yIjpmYWxzZX0)](https://mermaid-js.github.io/mermaid-live-editor/#/edit/eyJjb2RlIjoic2VxdWVuY2VEaWFncmFtXHJcblxyXG5wYXJ0aWNpcGFudCBHYW1lIGFzIEdhbWUgQ29udHJvbGxlclxyXG5wYXJ0aWNpcGFudCBTcHJpdGUgYXMgRW50aXR5IFNwcml0ZVxyXG5wYXJ0aWNpcGFudCBIaXRib3ggYXMgRW50aXR5IEhpdGJveFxyXG5wYXJ0aWNpcGFudCBUZXh0dXJlIGFzIFRleHR1cmUgTWFuYWdlclxyXG5wYXJ0aWNpcGFudCBTaGFkZXIgYXMgU2hhZGVyIE1hbmFnZXJcclxuXHJcbk5vdGUgbGVmdCBvZiBHYW1lIDogb25SZW5kZXIoKVxyXG5cclxuR2FtZS0-PitTaGFkZXIgOiBCaW5kIE1haW4gU2hhZGVyXHJcblxyXG5sb29wIENhZGEgVGV4dHVyYVxyXG4gICAgR2FtZS0-PitUZXh0dXJlIDogQmluZChzbG90KVxyXG5lbmRcclxuXHJcbk5vdGUgbGVmdCBvZiBHYW1lIDogU3ByaXRlIERyYXdpbmdcclxuXHJcbmxvb3AgQ2FkYSBFbnRpdHlcclxuXHJcbiAgICBHYW1lLT4-K1Nwcml0ZSA6IERyYXdcclxuICAgIFNwcml0ZS0-PitTaGFkZXIgOiBTRVQgTVZQIFVuaWZvcm0gPSBTcHJpdGUgTVZQICogZGVmYXVsdCBNVlBcclxuICAgIFNwcml0ZS0-Pi1TcHJpdGUgOiBnbERyYXcoKVxyXG5cclxuZW5kXHJcblxyXG5Ob3RlIGxlZnQgb2YgR2FtZSA6IEhpdGJveCBHcmlkIERyYXdpbmdcclxuXHJcbmxvb3AgQ2FkYSBFbnRpdHkgY29uIEhpdGJveFxyXG5cclxuICAgIEdhbWUtPj4rSGl0Ym94IDogRHJhdyBHcmlkXHJcbiAgICBIaXRib3gtPj4rU2hhZGVyIDogU0VUIE1WUCBVbmlmb3JtID0gSGl0Ym94IE1WUCAqIGRlZmF1bHQgTVZQXHJcbiAgICBIaXRib3gtPj4tSGl0Ym94IDogZ2xEcmF3KClcclxuXHJcbmVuZCIsIm1lcm1haWQiOnsidGhlbWUiOiJmb3Jlc3QifSwidXBkYXRlRWRpdG9yIjpmYWxzZX0)
